# 在虚拟机上安装DR-DOS 7.03  
**2011-04-12 11:27:44**

* 几年前前，我介绍过使用sun公司开源的虚拟机软件VirtualBox安装DOS的过程，那个时候，VirtualBox的版本还只有2.1.0，在DOS下在一些细节上是有些问题的，如今，我使用的该软件的版本已经到了4.0.4，解决了以前版本中的一些问题，尽管还有一些细小的问题，但已经很好用了。
    下载最新版本的VirtualBox，请访问请官方网站：http://www.virtualbox.org
    该软件支持中文，截止到2011年4月12日，其最新版本是4.0.4。
    本文介绍在虚拟机下安装DR-DOS的全过程，DR-DOS也是很有一些历史了，大概在MS-DOS3.3出现后就有了，后来一直发展到了7.03版，再后来就不见消息了，目前，仍然可以找到DR-DOS的官方网站：http://www.drdos.com（2017年3月17日注：这个链接已经失效了）
    如果你去这个网站转转，你会发现，DR-DOS并不是开源的软件，这个事情说起来也很有意思，若干年以前，据说DR-DOS被Caldera给买断了，之后，Caldera公开了源代码，并且更名为openDOS，于是，我们就可以得到开源的DR-DOS了，但是，Caldera现在也不再维护DR-DOS了，这个重任落到了一个非官方的DR-DOS的肩上，能够找到比较详尽信息的网站是：http://www.drdos.net
    DR-DOS的安装发布盘非常诡异，给出了5个貌似IMG文件（但实际格式不对）的东西，然后又给出了一个makedisk的可执行文件，用这个可执行文件可以在DOS下把那5个诡异的文件转换成软盘映像文件，本文将提供已经转换好的软盘映像文件，可以在虚拟机下直接作为软盘使用。
    关于虚拟机的问题，请自行参考下面的博文：
    http://hengch.blog.163.com/blog/static/107800672009046575193/
    http://hengch.blog.163.com/blog/static/1078006720090595020576/
    http://hengch.blog.163.com/blog/static/10780067200905316963/

    之所以要使用一下DR-DOS，是应为DR-DOS有一些过人之处，有两点我认为非常有用，一是多任务特性，二是它的DPMS（DOS Protected Mode Service）DOS保护模式服务，以后如果有时间一定介绍。
    DR-DOS还有一个过人之处，可以做的非常非常小，记得很多年以前，我曾经通过学习别人的资料，成功地把DR-DOS放到了PC机BIOS芯片的空余部分，并且成功启动了提示符，这个芯片现在还能找到，但怎么做到的，恐怕需要再来一遍了，或者找一找当年的记录。
    下面我们一步一步地在VirtualBox下安装DR-DOS，我的VirtualBox的版本是4.04。
    我们安装的DR-DOS的版本是7.03版，安装软盘的镜像文件从下面地址下载：
    http://blog.whowin.net/software/drdos703.rar
    把上面下载的文件放在一个合适的位置，一会安装时要用。

1、设置虚拟机
建立一个叫做DRDOS7.03的虚拟机，我设置了1G的硬盘和64M的内存，启动顺序是：软盘、光驱、硬盘
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
 
图1
点击“设置”按钮，设置该虚拟机
在设置界面上选“stoage”
在“stoage”界面上点击“软盘控制器”边上的+号
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图2
 
点击“Choose Disk”
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图3
 
现在前面下载的软盘镜像中的第一张盘作为软盘，点击“打开”按钮
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图4
 
完成
2、启动虚拟机drdos7.03，安装DRDOS7.03
在虚拟机管理界面上点击“开始”按钮启动刚才建立的DRDOS7.03虚拟机，见图1
启动后，DR-DOS发现硬盘没有分区，会首先启动FDISK，对硬盘进行分区
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图5
 
按任意键将进入FDISK1界面，这个fdisk的界面与通常在MS-DOS下看到的有些不一样
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图6
 
输入“1”，建立DOS主分区
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图7
 
输入“Y”将所有空间建立一个分区
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图8
 
输入“Y"校验数据区
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图9
 
校验完成后要求输入卷标，我们简单地按”回车“键忽略卷标（当然你也可以输入卷标）
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图10
 
输入”3“选择启动分区
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图11
 
我们只有一个分区，所以启动分区编号只能选择”1“
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图12
 
至此，分区完毕，按”ESC“键退出FDISK
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图13
 
按理，按任意键就可以重新启动然后开始继续安装了，但是，VirtualBox在这里有一点小毛病，如果这样重新启动，显示上可能会出现一些不对的地方，所以建议使用下面图示的方法重新启动。
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图14
系统再启动以后正式进入安装过程
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图15
按“回车”继续，从这一步开始要注意，在虚拟机的DOS界面下，不要点击鼠标，用键盘操作，一旦点击鼠标，鼠标将由DOS控制，当我们需要用鼠标更换软盘时，就不方便操作了，如果，发现鼠标不见了，按键盘右边的“Ctrl”键就可以恢复了。
我们首先看到的是Agreement，不管它，按“回车键”接受
然后要求输入姓名和公司名称以及序列号，随便填一下按“回车”就行了
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图16
 
选择安装的软件，我们不做改变，直接按“回车”继续
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图17
 
DR-DOS的配置菜单，我们也不做改变，直接“回车”继续
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图18
 
列出DR-DOS的安装选项列表，如果没有问题，按”回车“键将开始安装
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图19
 
提示更换第二张盘，按图示右击虚拟机下方的软盘图标，并选择”Choose a virtual floppy disk file...“，选择一个新的软盘
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图20
 
找到在前面下载的安装盘镜像的第二张，点击”打开“按钮
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图21
 
换盘完毕再虚拟机界面下按”回车“键，如此反复，换第三张、第四张、第五张盘后，安装完毕
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图22
 
此时要按照上图图示方法将软盘取出，否则，重新启动时还会从软盘启动，然后，按照图14的方法重新启动虚拟机，启动后就可以看到DR-DOS的界面了
在虚拟机上安装DR-DOS 7.03 - whowin - DOS编程技术
图23
 
    至此，在虚拟机下安装DR-DOS的工作圆满结束。
    本文中，涉及一些有关VirtualBox设置的问题，可以参考：《在虚拟机下安装DOS 6.22(上)》这篇文章。