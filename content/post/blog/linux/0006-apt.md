---
title: "apt原理"
date: 2022-05-03T16:43:29+08:00
author: whowin
sidebar: false
authorbox: false
toc: true
pager: true
categories:
  - "Linux"
tags:
draft: true
#references: 
# - [Apt](https://wiki.debian.org/Apt)  [apt中文](https://wiki.debian.org/zh_CN/Apt)
# - [How does apt-get really work?](https://unix.stackexchange.com/questions/377736/how-does-apt-get-really-work)
# - [APT-GET工作原理简介](https://www.cnblogs.com/kulin/archive/2012/07/31/2616490.html)
# - [ubuntu focal sources.list](https://manpages.ubuntu.com/manpages/focal/man5/sources.list.5.html)
# - [Understanding and Using sources.list for Ubuntu](https://linuxhint.com/sources_list_ubuntu/)
# - [What's the difference between multiverse, universe, restricted and main?](https://askubuntu.com/questions/58364/whats-the-difference-between-multiverse-universe-restricted-and-main)
postid: 100006
---

## 导言
* *apt*(Advanced Package Tool)，是 Debian 及其衍生 Linux 的命令行包管理器，可用于搜索、管理和查询包的信息，该工具还提供了对 *libapt-pkg* 和 *libapt-inst* 库的低级访问，一些高级包管理器要用到这两个库。
* 为了能够更好地使用，*apt* 包还提供了 apt 管理工具和高级命令行界面。
* 本文并不会讨论 *apt* 的使用方法，而是着重讨论与 *apt* 相关的文件及数据结构，以及 *apt* 的实现原理
* 本文以 ubuntu 20.04 为平台进行讨论

## 什么是 *apt*
* **APT** 是一个名为 *apt* 的包中的工具集合。*APT* 的主要功能被封装在 *c++* 函数库中；*APT* 中包含了三个命令行程序： *apt*、*apt-get* 和 *apt-cache*，这些程序使用 *APT* 的库函数来处理软件包。
* *APT* 通常被认为是 Debian 最好的功能之一，在当前所有 Debian 发行版中都默认安装 *apt* 工具包。
* *APT* 可以被认为是 *dpkg* 的前端程序，比前的 *dselect* 前端更好用。*dpkg* 可以对单个包执行操作，*APT* 管理各个软件包之间的关系(特别是依赖关系)，以及软件源和高级版本控制(发布版本跟踪和版本锁定)。
* *APT* 的一个主要特性是调用 *dpkg* 的方式，它对要安装或删除的包列表进行拓扑排序，并以尽可能好的顺序调用 *dpkg*。
* 在某些情况下，*APT* 利用dpkg的 *--force* 选项，但是，它只在找不到办法避免 *dkpg* 使用 *--force* 时才会使用




* *apt*(Advanced Package Tool)是 Debian 的一套核心工具，用于软件包的管理。Apt 可用来：
  - 安装应用程序
  - 移除应用程序
  - 保持您的应用为最新
  - 还有更多功能……
* *apt*，可以基本解决依赖问题并检索需要的软件包，可与 *dpkg*(dpkg，可以用来安装或移除软件包/应用程序)一起工作。*apt* 很强大，主要在命令行(控制台/terminal)下使用。但是，也有很多GUI/图形化工具，让您不必接触命令行。
* *apt update*
  - *apt update* 命令通常会在准备安装/升级软件之前使用，其作用是更新软件仓库中的软件列表
  - 我们通常把文件 **/etc/apt/sources.list** 称为 *apt* 的软件源，在执行 *apt update* 命令时，会读取这个软件源文件并根据软件源的配置从软件仓库中获取最新的软件清单
  - 从软件仓库下载的软件清单会被放在 **/var/lib/apt/lists** 目录下


## sources.list
